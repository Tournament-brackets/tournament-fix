<% include ../partials/header.ejs %>
    <!--Benzir Ahmed-->
    <!-- MAIN CONTENT -->
<<<<<<< HEAD
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
=======
>>>>>>> ba3de52b4869a2f35b14b0f602783c4df2f0365c
    <div class="container">
      <div class="row">
        <div class="col-md-offset-1 col-md-10">
          <h3>Brackets List </h3>
         
<div id="bracket_setup" class="low-margin-horz">
    <div class="bracket-options med-margin-vert">
        <div class="low-margin">
            <label>Type:&nbsp;</label>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default active">
                    <input type="radio" name="tourney_type" value="1" autocomplete="off" checked> Single Elimination
                </label>
                <label class="btn btn-default">
                    <input type="radio" name="tourney_type" value="2" autocomplete="off"> Double Elimination
                </label>
            </div>
        </div>
        <div class="low-margin">
            <label>Seeding:&nbsp;</label>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default active">
                    <input type="radio" name="tourney_seeds" value="1" autocomplete="off" checked> Assigned
                </label>
                <label class="btn btn-default">
                    <input type="radio" name="tourney_seeds" value="2" autocomplete="off"> Random
                </label>
            </div>
        </div>
    </div>
    <div id="add_competitors" class="input-group margin-auto-horz low-margin-vert">
        <textarea id="competitor_name" class="form-control" placeholder="Enter a new competitor..."></textarea>
        <div class="input-group-btn">
            <button id="add_competitor" type="button" class="btn btn-default">Add</button>
        </div>
    </div>
    <i class="center-block text-center">Enter a name above to add a competitor to your bracket. Drag and drop to assign seeds.</i>
    <ul id="competitors" class="list-group sortable"></ul>
    <button id="build_bracket" class="btn btn-primary center-block med-margin-vert">Build Bracket</button>
</div>
<div id="bracket_view" class="low-margin-horz">
    <div id="view_controls" class="med-margin-vert flex-wrap">
        <div id="view_options" class="margin-auto-horz med-margin-vert">
            <label>Show:&nbsp;</label>
            <div class="btn-group" data-toggle="buttons">
                <label for="winners_check" class="btn btn-default active">
                    <input type="checkbox" name="view_options" id="winners_check" value="bracket" checked> Winners
                </label>
                <label for="losers_check" class="btn btn-default active">
                    <input type="checkbox" name="view_options" id="losers_check" value="losers-bracket" checked> Losers
                </label>
            </div>
        </div>
        <div id="round_slider" class="margin-auto-horz med-margin-vert">
            <div id="slider-range">
                <div id="low_round" class="btn-group btn-group-xs ui-slider-handle ui-state-default ui-corner-all" style="" role="group">
                    <div class="btn-group-wrap">
                        <div class="btn-group btn-group-xs">
                            <button class="btn btn-default" data-bound="0" data-increment="-1"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>
                            <button class="btn btn-default" data-bound="0" data-increment="1"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                        </div>
                    </div>
                </div>
                <div id="high_round" class="ui-slider-handle ui-state-default ui-corner-all" style="" role="group">
                    <div class="btn-group-wrap">
                        <div class="btn-group btn-group-xs">
                            <button class="btn btn-default" data-bound="1" data-increment="-1"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>
                            <button class="btn btn-default" data-bound="1" data-increment="1"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                        </div>
                    </div>
                </div>
                <div class="range-labels">
                    <span class="text-xs" style="position:absolute;left:-5px;top:15px">Round 1</span>
                    <span class="text-xs" style="position:absolute;right:-5px;top:15px">Champion</span>
                </div>
            </div>
        </div>
        <button class="btn btn-primary margin-auto-horz med-margin-vert" onclick="$('#bracket_view').hide();$('#bracket_setup').show();">Edit Bracket</button>
    </div>
    <div class="bracket-wrap"></div>
</div>


<% include ../partials/footer.ejs %>

<<<<<<< HEAD
<script>


/*
function add_competitor(name) {
    if (name !== "" && name !== undefined) {
        var $competitors = $("#competitors");
        var competitor_list_item = '<li class="list-group-item low-padding-vert" draggable="true"><span class="competitor-seed">' + ($competitors.children().length + 1) + '</span><span class="competitor-name">' + name + '</span><button type="button" class="close" aria-label="Remove"><span class="glyphicon text-danger glyphicon-remove" aria-hidden="true"></span></button></li>'
        $competitors.append(competitor_list_item);
         console.log('add function invoked');
    }
}

$('#add_competitor').click(function(e){
     e.preventDefault(); // Ensure it is only this code that runs
        add_competitor($("#competitor_name").val());
});



$('#add_competitor').click(function(e){
     e.preventDefault(); // Ensure it is only this code that runs
        add_competitor($("#competitor_name").val());
});
*/
function add_competitor(name) {
    if (name !== "" && name !== undefined) {
        var $competitors = $("#competitors");
        var competitor_list_item = '<li class="list-group-item low-padding-vert" draggable="true"><span class="competitor-seed">' + ($competitors.children().length + 1) + '</span><span class="competitor-name">' + name + '</span><button type="button" class="close" aria-label="Remove"><span class="glyphicon text-danger glyphicon-remove" aria-hidden="true"></span></button></li>'
        $competitors.append(competitor_list_item);
    }
}

$(document).ready(function () {
    //'use strict';
    $("body").on("dblclick", ".matchup-member.competitor", function () {
        advance_competitor($(this));
    }).on("mousedown", ".matchup-member.competitor", function (e) {
        e.preventDefault();
    }).on("click", "#build_bracket", function () {
        var tourney_type = $("[name=tourney_type]:checked").val(),
            tourney_seeds = $("[name=tourney_seeds]:checked").val(),
            competitors = [],
            $competitor = $('<div><button type="button" class="btn btn-default btn-sm flex" style="padding:0;padding-right:4px;width:100%;text-align:left;"><span class="fit-width no-padding-vert" style="margin: -1px"><img width="30px" height="30px" style="border-radius: 4px 0 0 4px" src="/static/svg/profile_inv.png" alt="competitor"/></span><span class="competitor-name no-padding-vert width-100 text-left text-sm" style="margin-left: 5px"></span></button></div>');
        $("#competitors").children().each( function () {
            var $competitor_clone = $competitor.clone();
            $competitor_clone.find(".competitor-name").html($(this).children(".competitor-name").text());
            competitors.push($competitor_clone.html());
        });
        build_bracket(tourney_type, tourney_seeds, competitors);
         console.log('build bracket button clicked');
    }).on("change", "[name=view_options]", function () {
        if ($(this).is(":checked")) {
            $("." + $(this).val()).show();
        } else {
            $("." + $(this).val()).hide();
        }
    }).on("click", ".matchup-member.competitor>.advance-competitor", function () {
        advance_competitor($(this).parent(".matchup-member.competitor"));
    }).on("click", ".ui-slider-handle button", function (e) {
        var slider_range = $("#slider-range"),
            values = slider_range.slider("values"),
            bound = parseInt($(this).data("bound")),
            increment = parseInt($(this).data("increment")),
            new_value = values[bound] + increment,
            difference = values[bound] - values[Math.abs(bound - 1)];
        if (difference === 0) {
            values[Math.max(increment, 0)] = new_value;
            slider_range.slider("values", values);
        } else if (Math.max(difference * bound, difference * (bound - 1)) > 0) {
            values[bound] = new_value;
            slider_range.slider("values", values);
        }
    }).on("click", ".close", function() {
        $(this).closest("li").remove();
        $("#competitors").children().each(function(i) {
            $(this).children(".competitor-seed").html(i + 1);
        });
    });
    //adding competitor
    $("#add_competitor").click( function(e) {
        e.preventDefault(); // Ensure it is only this code that runs
        add_competitor($("#competitor_name").val());
         console.log('add button clicked');
    });
    $("#competitor_name").keypress(function(e) {
        if(e.keyCode === 13){
            e.preventDefault(); // Ensure it is only this code that runs
            add_competitor($(this).val());
        }
    });
});


function build_bracket(tourney_type, tourney_seeds, competitors, winners, losers) {
    //'use strict';
    winners = (winners === undefined) ? {} : winners;
    losers = (losers === undefined) ? {} : losers;
    
    function bracket_connector(round, size, game1, game2) {
        size = (size === undefined) ? round : size;
        var height,
            width = 10,
            connector_html;
        if (round > 0) {
            height = ((29 + 5) * Math.pow(2, size));
            connector_html = '<svg height="' + height + '" width="' + width + '" style="position:absolute;left:' + (-width / 2) + 'px;top:' + ((-height / 2) + 29) + 'px" class="connect round-' + round + ' game-' + game1 + '"><line x1="' + (width / 2) + '" y1="' + (height / 2) + '" x2="' + width + '" y2="' + (height / 2) + '"/><line class="top" x1="' + (width / 2) + '" y1="0" x2="' + (width / 2) + '" y2="' + (height / 2) + '"/><line class="top" x1="0" y1="0" x2="' + (width / 2) + '" y2="0"/></svg>';
            connector_html += '<svg height="' + height + '" width="' + width + '" style="position:absolute;left:' + (-width / 2) + 'px;top:' + ((-height / 2) + 29) + 'px" class="connect round-' + round + ' game-' + game2 + '"><line x1="' + (width / 2) + '" y1="' + (height / 2) + '" x2="' + width + '" y2="' + (height / 2) + '"/><line class="bottom" x1="' + (width / 2) + '" y1="' + (height / 2) + '" x2="' + (width / 2) + '" y2="' + height + '"/><line class="bottom" x1="0" y1="' + height + '" x2="' + (width / 2) + '" y2="' + height + '"/></svg>';
        } else if (round === 0) {
            height = 30 + (29 * (size - 1));
            connector_html = '<svg height="' + height + '" width="' + width + '" style="position:absolute;left:' + (-width / 2) + 'px;top:0px" class="connect round-' + (round) + '"><line x1="0" y1="' + (height / 2) + '" x2="' + width + '" y2="' + (height / 2) + '"/></svg>';
        } else if (round === -1) {
            height = 15;
            connector_html = '<svg height="' + height + '" width="' + width + '" style="position:absolute;left:' + (-width / 2) + 'px;top:29px" class="connect round-' + (round) + ' game-' + game1 + '"><line x1="' + (width / 2) + '" y1="0" x2="' + (width / 2) + '" y2="' + height + '"/><line x1="' + (width / 2) + '" y1="' + height + '" x2="' + width + '" y2="' + height + '"/><line x1="0" y1="0" x2="' + (width / 2) + '" y2="0"/></svg>';
        }
        return connector_html;
    }
}
    
    function matchup_member(game_num, outcome, outcome_num) {
        var $matchup_member = $("<tr class='matchup-member loser-bracket-member'><td class='seed'></td><td class='name'></td><td class='advance-competitor'><button><span class='glyphicon glyphicon-arrow-right'></span></button></td></tr>"),
            result = (outcome === "winner") ? winners[outcome_num] : losers[outcome_num];
        $matchup_member.attr("data-" + outcome, outcome_num).attr("data-game", game_num);
        
        if (result) {
            $matchup_member.find(".seed").html(result.seed);
            $matchup_member.find(".name").html(result.name);
        }
        return $matchup_member;
    }



  function loser_bracket_html(byes, rounds, seed, slots, pos) {
        if (rounds > 0) {
            seed = (seed === undefined) ? 1 : seed;
            slots = (slots === undefined) ? [1] : slots;
            pos = (pos === undefined) ? 1 : pos;

            var $bracket = $("<table class='round-" + (rounds + 1) + "'><tr><td class='matchup'><div class='connect-wrap'></div></td><td class='winner round-" + (rounds + 1) + "'><div class='connect-wrap'></div></td></tr></table>"),
                $bracket2 = $bracket.clone(),
                $matchups = $("<table class='matchup-group'></table>"),
                $winner = $matchups.clone(),
                $bracket_header = $("<th></th>"),
                slot_count = slots.length * 2,
                seed_inv = slot_count + 1 - seed,
                seed_ref = slots[Math.abs((slots.length + 1) * (rounds % 2) - pos) - 1],
                new_slots = [],
                next_pos = 2,
                round_base = Math.pow(2, rounds + Math.log2(slot_count)),
                game_number = round_base * 2 - (slot_count * 2) + seed,
                dependent_base = (round_base * 2) - (slot_count * 2) - slot_count,
                loser_game = round_base - slot_count + seed_ref;

            $winner.append(matchup_member(game_number + (slot_count / 2), "loser", loser_game)).append(matchup_member(game_number + (slot_count / 2), "winner", game_number));

            if (rounds === 1) {
                if (slot_count === 2) {
                    $bracket.prepend($("<thead></thead>").append($("<tr class='bracket-header'></tr>").append("<th colspan='2'>Round 1</th>")));
                }
                if (seed_inv <= byes) {
                    $winner.addClass("bye");
                    $winner.find(".matchup-member").addClass("bye");
                }
                
                $matchups.append(matchup_member(game_number, "loser", round_base - slot_count * 2 + seed)).append(matchup_member(game_number, "loser", round_base - slot_count * 2 + seed_inv));
                if (seed <= byes) {
                    $matchups.addClass("bye");
                    $matchups.find(".matchup-member").addClass("bye");
                    $winner.append(matchup_member(game_number + (slot_count / 2), "loser", round_base - slot_count * 2 + seed_inv));
                    $winner.find("[data-winner='" + game_number + "']").remove();
                }
                $bracket.find(".winner").children(".connect-wrap").append($winner).append(bracket_connector(-1, 1, game_number));
                $bracket.find(".matchup").children(".connect-wrap").append($matchups);

                return $bracket;
            } else {
                rounds--;
                for (i = 0; i < slots.length; i++) {
                    if (slots[i] === 1) {
                        new_slots.push(1, slot_count);
                    } else {
                        new_slots.push(slot_count + 1 - slots[i], slots[i]);
                    }
                }
                if (pos !== 1) {
                    pos *= 2;
                    next_pos = pos - 1;
                }
                slots = new_slots;
                $matchups.append(matchup_member(game_number, "winner", dependent_base + seed)).append(matchup_member(game_number, "winner", dependent_base + seed_inv));
                $bracket.find(".winner").children(".connect-wrap").append($winner).append(bracket_connector(-1, 1, game_number));
                $bracket.find(".matchup").children(".connect-wrap").append($matchups).append(bracket_connector(rounds + 1, rounds, dependent_base + ((seed > 1) ? seed_inv : seed), dependent_base + ((seed > 1) ? seed : seed_inv)));
                if (slot_count === 2) {
                    for (i = 1; i < rounds + 1; i++) {
                        $bracket_header.append("<span class='round-" + (i + 1) + "'>Losers Round " + i + "</span>");
                    }
                    $bracket2.prepend($("<thead></thead>").append($("<tr class='bracket-header'></tr>").append($bracket_header).append("<th colspan='2' class='round-" + (rounds + 2) + "'>Losers Round " + (rounds + 1) + "</th>")));
                }
                $matchups = $bracket2.find(".matchup");
                $bracket2.find(".winner").addClass("round-" + (rounds + 2)).children(".connect-wrap").append($bracket);
                $matchups.append(loser_bracket_html(byes, rounds, seed, slots, pos)).append(loser_bracket_html(byes, rounds, seed_inv, slots, next_pos));
                return $bracket2;
            }
        }
    }
    
    function bracket_html(competitors, rounds, seed, slots, tourney_type) {
        seed = (seed === undefined) ? 1 : seed;
        slots = (slots === undefined) ? 1 : slots;

        var seed_inv = slots - seed + 1,
            round_base = Math.pow(2, rounds + Math.log2(slots)),
            game_number = round_base - slots + seed,
            dependent_base = round_base - (slots * 2),
            $placeholder = matchup_member(game_number, "winner", dependent_base + seed),
            $placeholder2 = matchup_member(game_number, "winner", dependent_base + seed_inv),
            $table = $("<table><tr><td class='matchup round-" + rounds + "'></td><td class='winner round-" + (rounds + 1) + "'><div class='connect-wrap'>" + bracket_connector(rounds, rounds, dependent_base + ((seed > 1) ? seed_inv : seed), dependent_base + ((seed > 1) ? seed : seed_inv)) + "</div></td></tr></table>"),
            $bracket,
            $bracket_header = $("<th></th>"),
            champion_header,
            $matchups = $("<div></div>"),
            round_text,
            round_diff,
            round_labels = ["Final", "Semifinal", "Quarterfinal"];

        if (slots === 2 && tourney_type == 1) {
            $placeholder.addClass("final");
            $placeholder2.addClass("final");
        }

        if (rounds  === 0) {
            $matchups = $("<table class='matchup-group'></table>");

            if (competitors[seed_inv - 1] === "Bye") {
                $matchups.addClass("bye");
                $matchups.append($placeholder.addClass("bye competitor").html("<td class='seed'>" + seed + "</td><td class='name'>" + competitors[seed - 1] + "</td><td class='advance-competitor'><button><span class='glyphicon glyphicon-arrow-right'></span></button></td>"));
                $matchups.append("<tr class='matchup-member bye'><td class='seed'>" + seed_inv + "</td><td class='name'>Bye</td></tr>");
            } else {
                $matchups.append($placeholder.addClass("competitor").html("<td class='seed'>" + seed + "</td><td class='name'>" + competitors[seed - 1] + "</td><td class='advance-competitor'><button><span class='glyphicon glyphicon-arrow-right'></span></button></td>"));
                $matchups.append($placeholder2.addClass("competitor").html("<td class='seed'>" + seed_inv + "</td><td class='name'>" + competitors[seed_inv - 1] + "</td><td class='advance-competitor'><button><span class='glyphicon glyphicon-arrow-right'></span></button></td>"));
            }
            return $matchups;
        } else if (slots === 1) {
            slots *= 2;
            rounds--;
            $matchups.append(bracket_html(competitors, rounds, seed, slots));
        } else {
            rounds--;
            if (seed === 1) {
                $matchups.append(bracket_html(competitors, rounds, seed, slots * 2));
                $matchups.append(bracket_html(competitors, rounds, slots + 1 - seed, slots * 2));
            } else {
                $matchups.append(bracket_html(competitors, rounds, slots + 1 - seed, slots * 2));
                $matchups.append(bracket_html(competitors, rounds, seed, slots * 2));
            }
            slots *= 2;
        }
        $bracket = $table.clone();
        if (slots === 2) {
            $bracket.find(".winner").addClass("champion").children(".connect-wrap").append($("<table class='matchup-group'></table").append(matchup_member(0, "winner", 0))).find(".connect").replaceWith(bracket_connector(0, 1));
            champion_header = "<th class='round-" + (rounds + 2) + "'>Champion</th>";
            if (tourney_type == 2) {
                round_labels[0] = "Final 1";
                champion_header = "<th class='round-" + (rounds + 2) + "'>Final 2</th><th class='round-" + (rounds + 2) + "'>Final 3 (if nec.)</th>" + champion_header;
                $placeholder.addClass("final").attr("data-game", round_base * 2 - 1);
                $bracket.find(".matchup").after($("<td class='winner round-" + (rounds + 2) + "'></td>").append($("<div class='connect-wrap'></div>").append($("<table class='matchup-group'></table").append($placeholder.attr("data-game", round_base * 2 - 1)).append(matchup_member(round_base * 2 - 1, "winner", round_base * 2 - 2))).append(bracket_connector(0, 2))));
                $bracket.find(".winner.champion").before($("<td class='winner if-necessary round-" + (rounds + 2) + "'></td>").append($("<div class='connect-wrap'></div>").append($("<table class='matchup-group'></table").append(matchup_member(round_base * 2, "loser", round_base * 2 - 1)).append(matchup_member(round_base * 2, "winner", round_base * 2 - 1))).append(bracket_connector(0, 2))));
            }
            for (i = 1; i <= rounds + 1; i++) {
                round_diff = rounds + 1 - i;
                if (round_diff < round_labels.length) {
                    round_text = round_labels[round_diff];
                } else {
                    round_text = "Round " + i;
                }
                $bracket_header.append("<span class='round-" + i + "'>" + round_text + "</span>");
            }
            $bracket.prop("class", "bracket").prepend($("<thead></thead>").append($("<tr class='bracket-header'></tr>").append($bracket_header).append(champion_header)));
        } else {
            $bracket.find(".winner").children(".connect-wrap").append($("<table class='matchup-group'></table").append($placeholder).append($placeholder2));
        }

        $bracket.find(".matchup").append($matchups.html());

        return $bracket;
    }
    
    var rounds = Math.ceil(Math.log2(competitors.length)),
        round1_byes = Math.pow(2, rounds) - competitors.length,
        currentIndex = competitors.length,
        temporaryValue,
        randomIndex;
    
    if (competitors.length > 1) {
        $("#slider-range").slider({
            range: true,
            min: 1,
            max: rounds + 1,
            values: [1, rounds + 1],
            change: function(event, ui) {
                var low_round = ui.values[0];
                var high_round = ui.values[1];
                for (i = 1; i < low_round; i++) {
                    $(".bracket-header .round-" + i).hide();
                    $(".losers-bracket table.round-" + i).hide();
                    $(".losers-bracket svg.connect.round-" + i).hide();
                    $(".bracket .winner>.connect-wrap>svg.connect.round-" + i).hide();
                }
                if (low_round > 1) {
                    $(".matchup.round-" + (low_round - 1)).hide();
                }
                for (i = low_round; i <= high_round; i++) {
                    $(".matchup.round-" + i).show();
                    $(".winner.round-" + i).show();
                    $(".bracket-header .round-" + i).show();
                    $(".losers-bracket .round-" + i).show();
                    if (i === 1) {
                        $(".bracket .winner>.connect-wrap>svg.connect.round-" + i).show();
                    } else if (i < high_round && i < rounds) {
                        var $connect_wrap = $(".bracket .winner.round-" + (i + 1) + ">.connect-wrap");
                        var $connect = $connect_wrap.children("svg.connect");
                        $connect.remove();
                        $connect_wrap.append(bracket_connector(i - low_round + 1, i - low_round + 1, 1, 1));
                        if (low_round > 1 && i > 2) {
                            $connect_wrap = $(".losers-bracket .winner.round-" + (i + 1) + " .matchup>.connect-wrap");
                            $connect = $connect_wrap.children("svg.connect");
                            $connect_wrap.children("svg.connect").remove();
                            $connect_wrap.append(bracket_connector(i - low_round + 1, i - low_round + 1, 1, 1));
                        }
                    }
                }
                for (i = high_round + 1; i <= rounds + 1; i++) {
                    $(".winner.round-" + i).hide();
                    $(".bracket-header .round-" + i).hide();
                }
            }
        });
        
        if (tourney_seeds == 2) {
            while (0 !== currentIndex) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                temporaryValue = competitors[currentIndex];
                competitors[currentIndex] = competitors[randomIndex];
                competitors[randomIndex] = temporaryValue;
            }
        }

        for (i = 1; i <= round1_byes; i++) {
            competitors.push("Bye");
        }

        $(".bracket-wrap").html(bracket_html(competitors, rounds, 1, 1, tourney_type));
        if (tourney_type == 2) {
            $(".bracket-wrap").append(loser_bracket_html(round1_byes, rounds - 1).addClass("losers-bracket"));
            $('#view_options').show();
        } else {
            $('#view_options').hide();
        }
        
        if (rounds > 2) {
            $('#round_slider').show();
        } else {
            $('#round_slider').hide();
        }
        
        $(".matchup-member.bye").each(function () {
            if ($(this).hasClass("competitor")) {
                advance_competitor($(this));
            }
            $("svg.game-" + $(this).data("game")).attr("class", $("svg.game-" + $(this).data("game")).attr("class") + " bye");
        });
        $('#bracket_view').show().removeClass("hidden");
        $('#bracket_setup').hide();
    }


function advance_competitor($this) {
    //'use strict';
    var game = $this.data("game"),
        $loser_competitor = $this.siblings("tr.competitor[data-game='" + game + "']");
    
    if ($this.hasClass("final")) {
        $(".champion").find(".matchup-member").html($this.html());
    } else {
        $("tr[data-winner='" + game + "']").addClass("competitor").html($this.html());
        var $loser = $("tr[data-loser='" + game + "']");
        $loser.addClass("competitor").html($loser_competitor.html());
        if ($loser.hasClass("bye")) {
            advance_competitor($loser);
        }
    }
    
    if (!$this.hasClass("bye")) {
        $this.addClass("winner").removeClass("loser");
        $loser_competitor.addClass("loser").removeClass("winner");
    }
}



</script>
=======

>>>>>>> ba3de52b4869a2f35b14b0f602783c4df2f0365c
